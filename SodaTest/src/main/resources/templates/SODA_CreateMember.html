<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>ì†Œë‹¤(SODA)-íšŒì›ê°€ì…</title>
<link rel="stylesheet" th:href="@{/css/reset.css}">
<link rel="stylesheet" th:href="@{/css/HomeNav.css}">
<link rel="stylesheet" th:href="@{/css/Join.css}">
<script th:src="@{/js/jquery-3.7.1.min.js}"></script>
</head>
<header id="HeaderNav">
		<div id="MainNav">
			<a class="logo" href="/SODA/Home"><img th:src="@{/images/ì†Œë‹¤ë¡œê³ _ë°°ê²½O.png}" alt="logo"></a>
			<nav class="navBar">
				<ul class="barItems">
					<li><a href = "/SODA/Func" class="bars">ê¸°ëŠ¥</a></li>	
					<li><a href = "/SODA/Price" class="bars">ìš”ê¸ˆì œ</a></li>
					<li><a href = "/SODA/TeamCorpo" class="bars">íŒ€ í˜‘ì—…</a></li>
				</ul>
				<div class="userBtnWrap">
					<a href = "/SODA/loginPage" id="btnLogin">ë¡œê·¸ì¸</a>
					<a href = "/SODA/JoinSelect" id="btnJoin">íšŒì›ê°€ì…</a>
				</div>
			</nav>
		</div>		
</header>
<body>
	<div class="joinHome">
		<div class="newSignUp">
			<div class="newSignUpTitle">ìƒˆë¡œìš´ ê³„ì •ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ğŸ±â€ğŸ</div>
			<div class="newSignUpIntro">ì†Œë‹¤ì— ê°€ì…í•˜ì—¬ ì—…ë¬´ëŠ¥ë¥ ì„ ì˜¬ë ¤ë´ìš”</div>
			<div class="newSignUpWrap">
				<form method="post" action="/SODA/Join" id="newSignUpForm">
						<label>
							<span class="newWrapTitle">ì´ë©”ì¼</span>
							<th:block th:if="${session.email == null}">
								<div class="signUpEmailCheck">
									<input type="text" id="newSignUpEmail" name="newSignUpEmail" placeholder="example@gmail.com">
									<button id="emailCheck" type="button">ì¤‘ë³µ í™•ì¸</button>
								</div>
							</th:block>
							<th:block th:if="${session.email != null}">
								<div class="signUpEmailCheck">
									<input type="text" id="newSignUpEmail" name="newSignUpEmail" placeholder="example@gmail.com"
									th:value="${session.email}">
									<button id="emailCheck" type="button">ì¤‘ë³µ í™•ì¸</button>
								</div>
							</th:block>
							<p class="errorText" id="errorEmail">ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
						</label>
					<label>
						<span class="newWrapTitle">ì´ë¦„</span>
						<input type="text" id="newSignUpName" name="newSignUpName" placeholder="ì´ë¦„">
						<p class="errorText" id="errorName">ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
					</label>
					<label>
						<span class="newWrapTitle">ë¹„ë°€ë²ˆí˜¸</span>
						<input type="password" id="newSignUpPw" name="newSignUpPw" placeholder="ë¹„ë°€ë²ˆí˜¸">
						<p class="errorText" id="errorPw">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
					</label>
					<label>
						<span class="newWrapTitle">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</span>
						<input type="password" id="newSignUpRePw" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥">
						<p class="errorText" id="errorRePw"></p>
					</label>
					<label>
						<span class="newWrapTitle">ì§ë¬´</span>
						<div class="newSignUpSelect">
							<select>
								<option>ì§ë¬´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
								<option>ë§ˆì¼€íŒ…</option>
								<option>IT ìš´ì˜</option>
								<option>ì œí’ˆê´€ë¦¬</option>
								<option>HR</option>
								<option>ì˜ì—…</option>
								<option>ê³ ê°ì§€ì›</option>
								<option>CEO</option>
								<option>ì—”ì§€ë‹ˆì–´</option>
								<option>ë””ìì´ë„ˆ</option>
								<option>íšŒê³„/ë²•ë¥ </option>
								<option>ì¬ë¬´</option>
								<option>ê¸°íƒ€</option>
							</select>
						</div>
					</label>
					<div class="newSignUpCheck">
						<div class="newCheckWrap">
							<input type="checkbox" id="checkEssential" name="checkEssential">
							<span class="checkEsRequire">(í•„ìˆ˜) &nbsp;</span>
							<span>ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì„ í™•ì¸í•˜ì˜€ê³ , ì´ì— ë™ì˜í•©ë‹ˆë‹¤</span>
							<p class="errorText" id="checkError">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì·¨ê¸ˆë°©ì¹¨ í™•ì¸ ë° ë™ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
						</div>
						<div class="newCheckWrap">
							<input type="checkbox" id="checkOptional" name="checkOptional">
							<span class="checkOpRequire">(ì„ íƒ) &nbsp;</span>
							<span>í˜œíƒ ì•Œë¦¼ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤.</span>
						</div>
					</div>
					<button type="submit" id="newSignUpNext">ë‹¤ìŒ</button>
				</form>
			</div>
		</div>
	</div>
</body>
<script th:src="@{/js/CreateMember.js}"></script>
<script th:inline="javascript">
		function searchEmail(e){
			e.preventDefault();
			var signUpEmail = document.getElementById("newSignUpEmail").value;
			$.ajax({
				url: '/SODA/SearchEmail',
				method: 'POST',
				data: {signUpEmail: signUpEmail},
				success: function (response) {
					if (response == signUpEmail) {
						console.log(response);
						$('#errorEmail').css('display', 'block');
						$('#errorEmail').text('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.');
						$('#errorEmail').css('color', '#ff6b6b');
						$('#newSignUpEmail').css('border-color', '#ff6b6b');
					} else {
						console.log(signUpEmail);
						console.log(response);
						$('#errorEmail').css('display', 'block');
						$('#errorEmail').css('color', '#50b5bf');
						$('#errorEmail').text('íšŒì›ê°€ì… ê°€ëŠ¥í•œ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
					} 
				},
				error: function (xhr, status, error) {
					console.log(status + ": " + status)
				}
			});
		}
		$('#emailCheck').on('click', searchEmail);
</script>
</html>